# 시스템 아키텍처 설계서

## 1. 시스템 개요

### 1.1 주요 컴포넌트

-   **Frontend**: React 기반 사용자 인터페이스
-   **Backend**: Spring Boot 기반 REST API 서버
-   **AI Module**: LangChain/LangGraph 기반 AI 처리 엔진
-   **Vector Database**: ChromaDB 기반 벡터 검색 엔진
-   **Relational Database**: MariaDB 기반 관계형 데이터베이스
-   **External APIs**: Google Gemini API, Tavily API, LangSmith API

## 2. 시스템 구성도

```
[사용자] → [Frontend (React)] → [Backend (Spring Boot)] → [AI Module (LangChain/LangGraph)]
                                        ↓                        ↓
                                  [Postgresql]                 [ChromaDB]
                                                               ↓
                                                            [External APIs]
                                                            • Google Gemini API
                                                            • Tavily API
                                                            • LangSmith API
```

## 3. 기술 스택

| 구분               | 기술              | 버전/세부사항             |
| ------------------ | ----------------- | ------------------------- |
| **Frontend**       | React             | Javascript 기반           |
|                    | Zustand           | 상태 관리                 |
|                    | Tailwind CSS      | 스타일링                  |
| **Backend**        | Spring Boot       | REST API 서버             |
|                    | Spring Security   | JWT 인증                  |
|                    | JPA               | ORM                       |
|                    | Postgresql        | 관계형 데이터베이스       |
| **AI/ML**          | Python            | AI 모듈 베이스            |
|                    | LangChain         | AI 체인 프레임워크        |
|                    | LangGraph         | 그래프 기반 AI 워크플로우 |
|                    | ChromaDB          | 벡터 데이터베이스         |
|                    | FastAPI           | AI 모듈 API 서버          |
| **External APIs**  | Google Gemini API | LLM 서비스                |
|                    | Tavily API        | 웹 검색 서비스            |
|                    | LangSmith API     | AI 모니터링               |
| **Infrastructure** | Docker            | 컨테이너화                |
|                    | GitHub Actions    | CI/CD                     |
|                    | AWS EC2           | 클라우드 배포             |

## 4. 컴포넌트 구조

### 4.1 Frontend

```
frontend/
├── .github/workflows/              # GitHub Actions 워크플로우
│   └── main.yml                    # 메인 워크플로우
├── nginx/                          # Nginx 설정
│   └── nginx.conf                  # Nginx 설정 파일
├── public/                         # 정적 자산
│   └── favicon/                    # 파비콘 이미지 폴더
├── src/                            # 소스 코드
│   ├── assets/                     # 이미지 등 정적 자산
│   ├── components/                 # 재사용 가능한 UI 컴포넌트
│   │   ├── CategoryFilter.jsx      # 기업 카테고리 필터
│   │   ├── ChatBox.jsx             # AI 챗봇 컴포넌트
│   │   ├── FileUploadArea.jsx      # 파일 업로드 컴포넌트
│   │   ├── Navbar.jsx              # 상단 네비게이션 바
│   │   ├── NewsList.jsx            # 뉴스 목록 컴포넌트
│   │   ├── Pagination.jsx          # 페이지네이션
│   │   └── ViewToggle.jsx          # 전체/요약 뷰 전환
│   ├── hooks/                      # 커스텀 훅
│   │   ├── useAuth.js              # 인증 훅
│   │   └── useForm.js              # 폼 훅
│   ├── pages/                      # 주요 페이지 컴포넌트
│   │   ├── Bookmark.jsx           # 즐겨찾기 페이지
│   │   ├── Home.jsx               # 메인 뉴스 피드
│   │   ├── Login.jsx              # 로그인 페이지
│   │   ├── NewsDetail.jsx         # 뉴스 상세/요약/파일 업로드
│   │   └── Signup.jsx             # 회원가입 페이지
│   ├── store/                     # Zustand 상태 관리
│   │   ├── bookmarkStore.js       # 북마크 상태 관리
│   │   ├── categoryStore.js       # 카테고리 선택 상태
│   │   └── userStore.js           # 사용자 로그인 상태
│   ├── utils/                     # 유틸리티 함수 및 API
│   │   ├── api.js                 # API 요청 함수 모음
│   │   ├── axiosInstance.js       # Axios 인스턴스 설정
│   │   └── validation.js          # 폼 유효성 검사
│   ├── App.jsx                    # 라우팅 포함 메인 컴포넌트
│   ├── index.css                   # 전역 Tailwind 스타일
│   └── main.jsx                    # React 진입점
├── .dockerignore                   # Docker 빌드시 제외 파일
├── .gitignore                      # Git 제외 파일
├── Dockerfile                      # 프론트 Docker 빌드 설정
├── README.md                       # 프로젝트 설명서
├── docker-compose.yml              # Docker 통합 실행 설정
├── eslint.config.js                # ESLint 설정
├── index.html                      # HTML 템플릿
├── package-lock.json               # 의존성 고정 파일
├── package.json                    # 의존성 및 스크립트 정의
├── postcss.config.js               # PostCSS 설정
├── tailwind.config.js              # Tailwind 설정
└── vite.config.js                  # Vite 빌드 설정
```

### 4.2 Backend

```
backend/
├── .github/workflows/   # GitHub Actions 워크플로우
│   └── gradle.yml      # Gradle 빌드 워크플로우
├── gradle/wrapper/      # Gradle 래퍼
│   ├── gradle-wrapper.jar
│   └── gradle-wrapper.properties
├── src/main/java/com/alreadyemployee/alreadyemployee/
│   ├── chat/           # 채팅 관련 패키지
│   │   ├── controller/
│   │   │   ├── dto/    # 채팅 DTO
│   │   │   │   ├── ChatRequestDTO.java
│   │   │   │   ├── ChatResponseDTO.java
│   │   │   │   ├── HistoryMessageDTO.java
│   │   │   │   ├── NewsByIdDTO.java
│   │   │   │   ├── PingResponseDTO.java
│   │   │   │   ├── SummarizeRequestDTO.java
│   │   │   │   └── SummarizeResponseDTO.java
│   │   │   └── ChatController.java
│   │   ├── dto/        # 채팅 공통 DTO
│   │   │   ├── ChatMessageRequestDTO.java
│   │   │   ├── ChatMessageResponseDTO.java
│   │   │   ├── ChatToLLMRequest.java
│   │   │   └── ChatType.java
│   │   ├── entity/     # 채팅 엔티티
│   │   │   ├── ChatMessage.java
│   │   │   └── ChatSession.java
│   │   ├── repository/ # 채팅 레포지토리
│   │   │   ├── ChatMessageRepository.java
│   │   │   └── ChatSessionRepository.java
│   │   └── service/    # 채팅 서비스
│   │       ├── ChatProxyService.java
│   │       └── ChatService.java
│   ├── config/         # 설정 클래스
│   │   ├── RestClientConfig.java
│   │   ├── SecurityConfig.java
│   │   └── SwaggerConfig.java
│   ├── exception/      # 예외 처리
│   │   ├── global/
│   │   │   ├── ErrorResponse.java
│   │   │   ├── GlobalExceptionHandler.java
│   │   │   └── SuccessResponse.java
│   │   ├── BusinessException.java
│   │   └── ErrorCode.java
│   ├── jwt/            # JWT 관련
│   │   ├── JwtAuthenticationFilter.java
│   │   └── JwtTokenProvider.java
│   ├── news/           # 뉴스 관련 패키지
│   │   ├── controller/
│   │   │   ├── dto/    # 뉴스 DTO
│   │   │   │   ├── AddNewsRequestDTO.java
│   │   │   │   ├── NewsDetailResponseDTO.java
│   │   │   │   ├── NewsListByCompanyResponseDTO.java
│   │   │   │   └── NewsSimpleResponseDTO.java
│   │   │   └── NewsController.java
│   │   ├── entity/     # 뉴스 엔티티
│   │   │   └── News.java
│   │   ├── repository/ # 뉴스 레포지토리
│   │   │   └── NewsRepository.java
│   │   └── service/    # 뉴스 서비스
│   │       └── NewsService.java
│   ├── user/           # 사용자 관련 패키지
│   │   ├── controller/
│   │   │   ├── dto/    # 사용자 DTO
│   │   │   │   ├── AccessTokenResponseDTO.java
│   │   │   │   ├── EmailRequest.java
│   │   │   │   ├── SignInRequestDTO.java
│   │   │   │   ├── SignInResponseDTO.java
│   │   │   │   ├── SignUpRequestDTO.java
│   │   │   │   └── VerifyRequest.java
│   │   │   └── UserController.java
│   │   ├── entity/     # 사용자 엔티티
│   │   │   ├── CustomUserDetails.java
│   │   │   ├── EmailVerification.java
│   │   │   ├── RefreshToken.java
│   │   │   └── User.java
│   │   ├── repository/ # 사용자 레포지토리
│   │   │   ├── EmailVerificationRepository.java
│   │   │   ├── RefreshTokenRepository.java
│   │   │   └── UserRepository.java
│   │   └── service/    # 사용자 서비스
│   │       ├── CustomUserDetailsService.java
│   │       ├── RefreshTokenService.java
│   │       └── UserService.java
│   ├── util/           # 유틸리티
│   │   └── EmailCleanupScheduler.java
│   └── AlreadyemployeeApplication.java  # 메인 애플리케이션 클래스
├── src/main/resources/
│   ├── application-prod.properties
│   ├── application-test.properties
│   └── application.properties
├── .gitattributes      # Git 속성 설정
├── .gitignore          # Git 무시 파일
├── Dockerfile          # Docker 설정
├── README.md           # 프로젝트 설명서
├── build.gradle        # Gradle 빌드 설정
├── docker-compose.yml  # Docker Compose 설정
├── gradlew             # Gradle 래퍼 스크립트 (Unix)
├── gradlew.bat         # Gradle 래퍼 스크립트 (Windows)
└── settings.gradle     # Gradle 설정
```

### 4.3 AI Module

```
ai_module/
├── .github/workflows/   # GitHub Actions 워크플로우
├── chroma/             # ChromaDB 데이터 저장소
├── images/             # 이미지 파일들
├── llm-service/        # LLM 서비스 폴더
│   ├── data/          # 데이터 폴더
│   ├── file_data/     # 파일 데이터
│   ├── news_data/     # 뉴스 데이터
│   ├── test_data/     # 테스트 데이터
│   ├── __init__.py    # 패키지 초기화
│   ├── chat_langgraph.py       # 채팅 LangGraph
│   ├── chromadb_news_test.py   # ChromaDB 뉴스 테스트
│   ├── chromadb_resume_test.py # ChromaDB 이력서 테스트
│   ├── main.py        # 메인 실행 파일
│   └── summarizer.py  # 요약기
├── .gitignore         # Git 무시 파일
├── README.md          # 프로젝트 설명서
├── agent_workflow.png # 에이전트 워크플로우 다이어그램
├── docker-compose.yml # Docker Compose 설정
├── entrypoint.sh      # 컨테이너 진입점 스크립트
├── insert_sample_data.py      # 샘플 데이터 삽입
├── llm-service.Dockerfile     # LLM 서비스 Dockerfile
├── ollama.Dockerfile          # Ollama Dockerfile
├── pyproject.toml     # Python 프로젝트 설정
└── test_resume.txt    # 테스트 이력서 파일
```

## 5. 데이터 플로우

### 5.1 뉴스 요약 플로우

1. **사용자 요청**: Frontend → Backend (뉴스 클릭)
2. **AI 처리**: Backend → AI Module (LangChain 요약 체인)
3. **벡터 저장**: ChromaDB에 임베딩 벡터 저장
4. **결과 반환**: AI Module → Backend → Frontend

### 5.2 AI 챗봇 플로우

1. **사용자 질문**: Frontend → Backend (챗봇 질문)
2. **벡터 검색**: ChromaDB에서 관련 문서 검색
3. **웹 검색**: Tavily API를 통한 기업 관련 실시간 정보 수집
4. **AI 답변**: LangGraph QA 그래프 실행
5. **응답 반환**: AI Module → Backend → Frontend

### 5.3 피드백 시스템 플로우

1. **파일 업로드**: 사용자가 이력서/포트폴리오 첨부
2. **파일 처리**: AI Module에서 파일 내용 추출
3. **벡터화**: ChromaDB에 사용자별 세션으로 저장
4. **피드백 생성**: LangGraph 피드백 그래프 실행
5. **결과 제공**: 맞춤형 피드백 반환

## 6. 보안

-   **JWT 토큰 기반 인증**: 사용자 로그인 세션 관리
-   **API 키 관리**: 외부 API 보안 키 환경변수 관리
-   **CORS 설정**: 프론트엔드-백엔드 간 안전한 통신
